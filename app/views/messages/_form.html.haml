%div{"ng-controller"=>"MessagesController as mc"}
  .row
    .col-xs-11.col-md-7.center-block{:style=>"float:none"}
      #front_end_errors
        %span{"ng-show"=>"!mc.new_message || mc.new_message.length < 1"} You must enter at least 1 character to send a message
        %span{"ng-show"=>"mc.new_message.length>150"} Your message is {{mc.new_message.length - 150}} characters too long
      #message-form
        = form_for(@message, remote:true) do |f|
          - if @message.errors.any?
            #error_explanation
              %h2
                = pluralize(@message.errors.count, "error")
                prohibited this message from being saved:
              %ul
                - @message.errors.full_messages.each do |message|
                  %li= message
          .field
            = f.text_area :message_body, :value => params[:message_message_body], "ng-model" => "mc.new_message"
          .col-md-6.actions.text-left
            = f.submit "Send message", :class => "btn btn-primary send-message", "ng-disabled" => "!mc.new_message || mc.new_message.length<1 || mc.new_message.length>150"
          .col-md-6.count.text-right
            %h4#remaining.remaining {{150 - mc.new_message.length}}

